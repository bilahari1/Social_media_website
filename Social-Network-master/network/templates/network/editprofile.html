{% extends "network/layout2.html" %}

{% load static %}

{% block title %}
    Edit Profile | Network
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{% static 'network/editprofile.js' %}"></script>
{% endblock %}

{% block body %}
    <div class="user-box" style="margin-top: 6vh;">

        <form action="{% url 'editprofile' %}" method="post" id="signin-form" style="width: 100%;margin-bottom: 5vh;"  enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <div class="form-row align-items-center">
                <div class="col-sm-6 my-1">
                    <input class="form-control inp fname" type="text" name="firstname" placeholder="First Name *" autocomplete="off" value="{{ request.user.first_name }}" autofocus>
                    <span class="star small"></span>
                </div>
                <div class="col-sm-6 my-1">
                    <input class="form-control inp lname" type="text" name="lastname" placeholder="Last Name *" autocomplete="off" value="{{ request.user.last_name }}">
                    <span class="star small"></span>
                </div>
            </div>
            </div>
            <div class="form-group">
                <input class="form-control inp usrname" type="text" name="username" placeholder="Username *" autocomplete="off" value="{{ request.user.username }}">
                <span class="star small">{{message}}</span>
            </div>
            <div class="form-group">
                <input class="form-control inp email" type="email" name="email" placeholder="Email Address *" autocomplete="off" value="{{ request.user.email }}">
                <span class="star small"></span>
            </div>
<!--            <div class="form-group">-->
<!--                <input class="form-control inp pswd" type="password" name="current_password" id="current_password" placeholder="Current Password *" autocomplete="off">-->
<!--                <span class="star small" id="current-password-error">{{ current_password_error }}</span>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <input class="form-control inp pswd" type="password" name="password" placeholder="Password *" autocomplete="off">-->
<!--                <span class="star small"></span>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <input class="form-control inp cpswd" type="password" name="confirmation" placeholder="Confirm Password *" autocomplete="off">-->
<!--                <span class="star small"></span>-->
<!--            </div>-->
            <div class="form-group">
                <div class="custom-file">
                    <input type="file" name="profile" class="form-control custom-file-input" id="profile" accept="image/jpeg,image/png,image/webp,image/gif" data-focusable="true" aria-describedby="inputGroupFileAddon01" >
                    <label class="custom-file-label" for="profile"><span style="color: #6c757d;">Choose profile picture</span></label>
                    <span class="star small">{{msg}}</span>
                </div>
            </div>
            <div class="form-group">
                <div class="custom-file">
                    <input type="file" name="cover" class="form-control custom-file-input" id="cover" accept="image/jpeg,image/png,image/webp,image/gif" data-focusable="true" aria-describedby="inputGroupFileAddon01">
                    <label class="custom-file-label" for="cover"><span style="color: #6c757d;">Choose cover picture</span></label>
                    <span class="star small"></span>
                </div>
            </div>


            <center>
                <input class="btn btn-primary" type="submit" value="Save Changes" style="margin-top: 10px; width: 95%;">
            </center>
        </form>
    </div>
<script>
        // Show currently uploaded profile picture
        var profileInput = document.getElementById('profile');
        var profileLabel = document.querySelector('label[for="profile"]');
        var currentProfilePic = "{{ request.user.profile_pic.url }}"; // Fetch the URL of the current profile picture from the database
        if (currentProfilePic) {
            profileLabel.textContent = currentProfilePic.split('/').pop();
        }
        profileInput.addEventListener('change', function () {
            profileLabel.textContent = profileInput.files[0].name;
        });

        // Show currently uploaded cover picture
        var coverInput = document.getElementById('cover');
        var coverLabel = document.querySelector('label[for="cover"]');
        var currentCoverPic = "{{ request.user.cover.url }}"; // Fetch the URL of the current cover picture from the database
        if (currentCoverPic) {
            coverLabel.textContent = currentCoverPic.split('/').pop();
        }
        coverInput.addEventListener('change', function () {
            coverLabel.textContent = coverInput.files[0].name;
        });
</script>
{% endblock %}
