{% extends "network/layout.html" %}
{% load static %}

{% block title %} Job applicants | Social Network {% endblock %}

{% block head %}
    <style>
        ul.job-applications {
            list-style: none;
            padding-left: 0;
        }
        .job-application {
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-left: 10px;
            margin-right: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            box-shadow: 0px 0px 5px #ccc;
            transition: all 0.3s ease-in-out;
        }
        .job-application:hover {
            box-shadow: 0px 0px 10px #ccc;
        }
        .job-application p {
            margin: 5px 0;
        }
        .job-application a {
            color: #007bff;
            text-decoration: none;
            transition: all 0.3s ease-in-out;
        }
        .job-application a:hover {
            color: #0056b3;
        }
        .container {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh; /* sets the height of the container to the full height of the viewport */
        }

        .message {
          text-align: center; /* centers the text horizontally */
          font-size: 24px;
        }
        .box{
            margin-top: 83px;
            margin-bottom: 16px;
            margin-left: 10px;
        }
    </style>
{% endblock %}

{% block body %}
    <div class="main-div">
        <div class="left-div">
            <nav class="head heading">
                {% if page == 'all_posts' %}
                    <h3>All Posts</h3>
                {% elif page == 'following' %}
                    <h3>Following</h3>
                {% elif page == 'postjobs' %}
                    <h3>Job Applications</h3>
                {% elif page == 'saved' %}
                    <h3>Saved</h3>
                {% elif page == 'profile' %}
                    <h3>Profile</h3>
                {% else %}
                    <h3>Explore</h3>
                {% endif %}
            </nav>
            <div class="left-div-content">
                <div class="posts-view">
                    {% block profile %}
                    {% endblock %}
                    <div class="main-div-content">
                        <div class="box">
                            {% if job_applications %}
                                {% with jid=job_applications.0.job_posting_id %}
                                    <a href="{% url 'download_csv' jid %}" class="btn btn-primary">Download CSV</a>
                                {% endwith %}
                            {% endif %}
                        </div>
                        <ul class="job-applications">
                        {% for job_application in job_applications %}
                            <li class="job-application">
                                <p><strong>Name:</strong> <a href="{% url 'profile' job_application.user.username %}">{{ job_application.name }}</a></p>
                                <p><strong>Email:</strong> {{ job_application.email }}</p>
                                <p><strong>Phone:</strong> {{ job_application.phone }}</p>
                                <p><strong>Cover letter:</strong> {{ job_application.cover_letter }}</p>
                                <p><strong>Resume:</strong> <a href="{{ job_application.resume.url }}">View resume</a></p>
                            </li>
                        {% empty %}
                            <div class="container">
                                <p class="message"><strong>No job applications found.</strong></p>
                            </div>
                        {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
